<!--
  Neramit Dai Mai Co., Ltd.
  Minigame - Cosmetic2
  Version: 1.0.0
-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>COSMETIC</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background-image: url("../image/BG3.png");
  background-size: cover;
  background-position: bottom;
  background-attachment: fixed;
  display: grid;
  place-items: center;
  min-height: 100vh;
}

.game-wrap {
  display: flex;
  gap: 2rem;
}

/* Character Stage */
.character {
  position: relative;
  width: 520px;
  height: 760px;
}

.character img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
}

.layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  pointer-events: none;
}

.base  { z-index: 1; }
.short { z-index: 2; }
.shirt { z-index: 3; }
.face  { z-index: 4; }
.hat   { z-index: 5; }

/* Controls */
.controls {
  display: grid;
  gap: clamp(1rem, 1.5vw, 4rem);
}

.controls button {
  padding: 0.6rem 1rem;
  border-radius: 999px;
  border: none;
  background: #0b5ed7;
  color: white;
  cursor: pointer;
  font-weight: 600;
}

.controls button:hover {
  background: #094bb3;
}

@media (max-width: 720px) {
.character {
    width: 260px;
    height: 380px;
    }
}

@media (max-width: 450px) {
.character {
    width: 195px;
    height: 310px;
    }
}

</style>
</head>

<body>

<div class="game-wrap">

  <!-- CHARACTER -->
  <div class="character">
    <img src="../image/cosmetic/base/Base_02.png" alt="base girl" class="layer base" id="base_02">
    <img src="../image/cosmetic/base/Base_01.png" alt="base boy" class="layer base" id="base_01">

    <!-- LAYER ORDER -->
    <img id="shirt" src="../image/cosmetic/itm1200.png" class="layer shirt">
    <img id="short" src="../image/cosmetic/itm1300.png" class="layer short">
    <img id="face"  src="../image/cosmetic/itm1100.png" class="layer face">
    <img id="hat"   src="../image/cosmetic/itm1000.png" class="layer hat">
  </div>

  <!-- CONTROLS -->
  <div class="controls">
    <button onclick="toggleBase()">Skin</button>

    <button onclick="randomItem('hat')">ðŸŽ©</button>
    <button onclick="randomItem('face')">ðŸ™‚ </button>
    <button onclick="randomItem('shirt')">ðŸ‘• </button>
    <button onclick="randomItem('short')">ðŸ©³ </button>

    <button onclick="randomAll()">Random Outfit</button>
  </div>

</div>

<script>
const BASE_PATH = '../image/cosmetic/';
const BASE_CHAR_PATH = '../image/cosmetic/base/';

const items = {
  base: [
    BASE_CHAR_PATH + 'Base_01.png',
    BASE_CHAR_PATH + 'Base_02.png'
     ],
  hat: [
    BASE_PATH + 'itm1000.png',
    BASE_PATH + 'itm1001.png',
    BASE_PATH + 'itm1002.png',
    BASE_PATH + 'itm1003.png',
    BASE_PATH + 'itm1004.png',
    BASE_PATH + 'itm1005.png',
    BASE_PATH + 'itm1006.png',
    BASE_PATH + 'itm1007.png',
    BASE_PATH + 'itm1008.png',
    BASE_PATH + 'itm1009.png',
    BASE_PATH + 'itm1010.png',
    BASE_PATH + 'itm1011.png',
    BASE_PATH + 'itm1012.png',
    BASE_PATH + 'itm1013.png',
    BASE_PATH + 'itm1014.png',
    BASE_PATH + 'itm1015.png',
    BASE_PATH + 'itm1016.png',
    BASE_PATH + 'itm1017.png',
    BASE_PATH + 'itm1018.png',
    BASE_PATH + 'itm1019.png',
    BASE_PATH + 'itm1020.png',
    BASE_PATH + 'itm1021.png',
    BASE_PATH + 'itm1022.png',
    BASE_PATH + 'itm1023.png',
    BASE_PATH + 'itm1024.png'
  ],
  face: [
    BASE_PATH + 'itm1100.png',
    BASE_PATH + 'itm1101.png',
    BASE_PATH + 'itm1102.png',
    BASE_PATH + 'itm1103.png',
    BASE_PATH + 'itm1104.png',
    BASE_PATH + 'itm1105.png',
    BASE_PATH + 'itm1106.png',
    BASE_PATH + 'itm1107.png'
  ],
  shirt: [
    BASE_PATH + 'itm1200.png',
    BASE_PATH + 'itm1201.png',
    BASE_PATH + 'itm1202.png',
    BASE_PATH + 'itm1203.png',
    BASE_PATH + 'itm1204.png',
    BASE_PATH + 'itm1205.png',
    BASE_PATH + 'itm1206.png',
    BASE_PATH + 'itm1207.png',
    BASE_PATH + 'itm1208.png',
    BASE_PATH + 'itm1209.png',
    BASE_PATH + 'itm1210.png'
  ],
  short: [
    BASE_PATH + 'itm1300.png',
    BASE_PATH + 'itm1301.png',
    BASE_PATH + 'itm1302.png',
    BASE_PATH + 'itm1303.png',
    BASE_PATH + 'itm1304.png',
    BASE_PATH + 'itm1305.png',
    BASE_PATH + 'itm1306.png',
    BASE_PATH + 'itm1307.png',
    BASE_PATH + 'itm1308.png',
    BASE_PATH + 'itm1309.png',
    BASE_PATH + 'itm1310.png',
    BASE_PATH + 'itm1311.png',
    BASE_PATH + 'itm1312.png',
    BASE_PATH + 'itm1313.png',
    BASE_PATH + 'itm1314.png'
  ]
};

const index = {
  base: 0,
  hat: 0,
  face: 0,
  shirt: 0,
  short: 0
};

function randomItem(type) {
  const layer = document.getElementById(type);

  if (!layer || items[type].length === 0) return;

  let newIndex;
  do {
    newIndex = Math.floor(Math.random() * items[type].length);
  } while (newIndex === index[type]);

  index[type] = newIndex;

  // ðŸ”¥ FORCE visibility back on
  layer.style.opacity = 1;
  layer.style.display = 'block';
  layer.style.visibility = 'visible';

  layer.src = items[type][index[type]];
}

function randomAll() {
  ['hat', 'face', 'shirt', 'short'].forEach(type => {
    randomItem(type);
  });
}

function toggleBase() {
  index.base = (index.base + 1) % items.base.length;
  document.getElementById('base_01').style.display = index.base === 0 ? 'block' : 'none';
  document.getElementById('base_02').style.display = index.base === 1 ? 'block' : 'none';
}

localStorage.setItem('outfit', JSON.stringify(index));
</script>

</body>
</html>