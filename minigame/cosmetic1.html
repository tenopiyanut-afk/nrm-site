<!--
  Neramit Dai Mai Co., Ltd.
  Minigame - Cosmetic2
  Version: 1.0.0
-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>COSMETIC</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background-image: url("../image/BG3.png");
  background-size: cover;
  background-position: bottom;
  background-attachment: fixed;
  display: grid;
  place-items: center;
  min-height: 100vh;
}

.game-wrap {
  display: flex;
  gap: 2rem;
}

/* Character Stage */
.character {
  position: relative;
  width: 520px;
  height: 760px;
}

.character img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
}

.layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  pointer-events: none;
}

.base  { z-index: 1; }
.short { z-index: 2; }
.shirt { z-index: 3; }
.face  { z-index: 4; }
.hat   { z-index: 5; }

/* Controls */
.controls {
  display: grid;
  gap: clamp(1rem, 1.5vw, 4rem);
}

.controls button {
  padding: 0.6rem 1rem;
  border-radius: 999px;
  border: none;
  background: #0b5ed7;
  color: white;
  cursor: pointer;
  font-weight: 600;
}

.controls button:hover {
  background: #094bb3;
}

@media (max-width: 720px) {
.character {
    width: 260px;
    height: 380px;
    }
}

@media (max-width: 450px) {
.character {
    width: 195px;
    height: 310px;
    }
}

</style>
</head>

<body>

<div class="game-wrap">

  <!-- CHARACTER -->
  <div class="character">
    <img src="../image/cosmetic/base/Base_02.png" alt="base girl" class="layer base" id="base_02">
    <img src="../image/cosmetic/base/Base_01.png" alt="base boy" class="layer base" id="base_01">

    <!-- LAYER ORDER -->
    <img id="shirt" src="../image/cosmetic/itm1200.png" class="layer shirt">
    <img id="short" src="../image/cosmetic/itm1300.png" class="layer short">
    <img id="face"  src="../image/cosmetic/itm1100.png" class="layer face">
    <img id="hat"   src="../image/cosmetic/itm1000.png" class="layer hat">
  </div>

  <!-- CONTROLS -->
  <div class="controls">
    <button onclick="toggleBase()">Skin</button>

    <button onclick="randomItem('hat')">ðŸŽ©</button>
    <button onclick="randomItem('face')">ðŸ™‚ </button>
    <button onclick="randomItem('shirt')">ðŸ‘• </button>
    <button onclick="randomItem('short')">ðŸ©³ </button>

    <button onclick="randomAll()">Random Outfit</button>
  </div>

</div>

<script>
const BASE_PATH = '../image/cosmetic/';
const BASE_CHAR_PATH = '../image/cosmetic/base/';

const items = {
  base: [
    BASE_CHAR_PATH + 'Base_01.png',
    BASE_CHAR_PATH + 'Base_02.png'
     ],
  hat: [
    BASE_PATH + 'itm1031.png',
    BASE_PATH + 'itm1032.png',
    BASE_PATH + 'itm1033.png',
    BASE_PATH + 'itm1034.png',
    BASE_PATH + 'itm1035.png',
    BASE_PATH + 'itm1036.png',
    BASE_PATH + 'itm1037.png',
    BASE_PATH + 'itm1038.png',
    BASE_PATH + 'itm1039.png',
    BASE_PATH + 'itm1040.png'
  ],
  face: [
    BASE_PATH + 'itm1100.png',
    BASE_PATH + 'itm1101.png',
    BASE_PATH + 'itm1102.png',
    BASE_PATH + 'itm1103.png',
    BASE_PATH + 'itm1104.png',
    BASE_PATH + 'itm1105.png'
  ],
  shirt: [
    BASE_PATH + 'itm1217.png',
    BASE_PATH + 'itm1218.png',
    BASE_PATH + 'itm1219.png',
    BASE_PATH + 'itm1220.png',
    BASE_PATH + 'itm1221.png',
    BASE_PATH + 'itm1222.png',
    BASE_PATH + 'itm1223.png',
    BASE_PATH + 'itm1224.png',
    BASE_PATH + 'itm1225.png',
    BASE_PATH + 'itm1226.png'
  ],
  short: [
    BASE_PATH + 'itm1321.png',
    BASE_PATH + 'itm1322.png',
    BASE_PATH + 'itm1323.png',
    BASE_PATH + 'itm1324.png',
    BASE_PATH + 'itm1325.png',
    BASE_PATH + 'itm1326.png',
    BASE_PATH + 'itm1327.png',
    BASE_PATH + 'itm1328.png',
    BASE_PATH + 'itm1329.png',
    BASE_PATH + 'itm1330.png'
  ]
};

const index = {
  base: 0,
  hat: 0,
  face: 0,
  shirt: 0,
  short: 0
};

function randomItem(type) {
  const layer = document.getElementById(type);

  if (!layer || items[type].length === 0) return;

  let newIndex;
  do {
    newIndex = Math.floor(Math.random() * items[type].length);
  } while (newIndex === index[type]);

  index[type] = newIndex;

  // ðŸ”¥ FORCE visibility back on
  layer.style.opacity = 1;
  layer.style.display = 'block';
  layer.style.visibility = 'visible';

  layer.src = items[type][index[type]];
}

function randomAll() {
  ['hat', 'face', 'shirt', 'short'].forEach(type => {
    randomItem(type);
  });
}

function toggleBase() {
  index.base = (index.base + 1) % items.base.length;
  document.getElementById('base_01').style.display = index.base === 0 ? 'block' : 'none';
  document.getElementById('base_02').style.display = index.base === 1 ? 'block' : 'none';
}

localStorage.setItem('outfit', JSON.stringify(index));
</script>

</body>
</html>