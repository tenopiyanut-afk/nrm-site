<!--
  Neramit Dai Mai Co., Ltd.
  Minigame - Cosmetic3
  Version: 1.0.0
-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>COSMETIC</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background-image: url("../image/BG3.png");
  background-size: cover;
  background-position: bottom;
  background-attachment: fixed;
  display: grid;
  place-items: center;
  min-height: 100vh;
}

.game-wrap {
  display: flex;
  gap: 2rem;
}

/* Character Stage */
.character {
  position: relative;
  width: 520px;
  height: 760px;
}

.character img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
}

.layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  pointer-events: none;
}

.base  { z-index: 1; }
.shirt { z-index: 2; }
.short { z-index: 3; }
.hat   { z-index: 4; }
.face  { z-index: 5; }

/* Controls */
.controls {
  display: grid;
  gap: clamp(1rem, 1.5vw, 4rem);
}

.controls button {
  padding: 0.6rem 1rem;
  border-radius: 999px;
  border: none;
  background: #0b5ed7;
  color: white;
  cursor: pointer;
  font-weight: 600;
}

.controls button:hover {
  background: #094bb3;
}

@media (max-width: 720px) {
.character {
    width: 260px;
    height: 380px;
    }
}

@media (max-width: 450px) {
.character {
    width: 195px;
    height: 310px;
    }
}

</style>
</head>

<body>

<div class="game-wrap">

  <!-- CHARACTER -->
  <div class="character">
    <img src="../image/cosmetic/base/Base_03.png" alt="base robot" class="layer base" id="base_03">

    <!-- LAYER ORDER -->
    <img id="short" src="../image/cosmetic/itm2300.png" class="layer short">
    <img id="shirt" src="../image/cosmetic/itm2200.png" class="layer shirt">
    <img id="face"  src="../image/cosmetic/itm2100.png" class="layer face">
    <img id="hat"   src="../image/cosmetic/itm2000.png" class="layer hat">
  </div>

  <!-- CONTROLS -->
  <div class="controls">

    <button onclick="randomItem('hat')">ðŸŽ©</button>
    <button onclick="randomItem('face')">ðŸ™‚ </button>
    <button onclick="randomItem('shirt')">ðŸ‘• </button>
    <button onclick="randomItem('short')">ðŸ©³ </button>

    <button onclick="randomAll()">Random Outfit</button>
  </div>

</div>

<script>
const BASE_PATH = '../image/cosmetic/';
const BASE_CHAR_PATH = '../image/cosmetic/base/';

const items = {
  base: [
    BASE_CHAR_PATH + 'Base_03.png'
     ],
  hat: [
    BASE_PATH + 'itm2000.png',
    BASE_PATH + 'itm2001.png',
    BASE_PATH + 'itm2002.png',
    BASE_PATH + 'itm2003.png',
    BASE_PATH + 'itm2004.png',
    BASE_PATH + 'itm2005.png'
  ],
  face: [
    BASE_PATH + 'itm2100.png',
    BASE_PATH + 'itm2101.png',
    BASE_PATH + 'itm2102.png',
    BASE_PATH + 'itm2103.png',
    BASE_PATH + 'itm2104.png',
    BASE_PATH + 'itm2105.png',
    BASE_PATH + 'itm2106.png',
    BASE_PATH + 'itm2107.png',
    BASE_PATH + 'itm2108.png'
  ],
  shirt: [
    BASE_PATH + 'itm2200.png',
    BASE_PATH + 'itm2201.png',
    BASE_PATH + 'itm2202.png',
    BASE_PATH + 'itm2203.png',
    BASE_PATH + 'itm2204.png',
    BASE_PATH + 'itm2205.png'
  ],
  short: [
    BASE_PATH + 'itm2300.png',
    BASE_PATH + 'itm2301.png',
    BASE_PATH + 'itm2302.png',
    BASE_PATH + 'itm2303.png',
    BASE_PATH + 'itm2304.png',
    BASE_PATH + 'itm2305.png'
  ]
};

const index = {
  base: 0,
  hat: 0,
  face: 0,
  shirt: 0,
  short: 0
};

function randomItem(type) {
  const layer = document.getElementById(type);

  if (!layer || items[type].length === 0) return;

  let newIndex;
  do {
    newIndex = Math.floor(Math.random() * items[type].length);
  } while (newIndex === index[type]);

  index[type] = newIndex;

  // ðŸ”¥ FORCE visibility back on
  layer.style.opacity = 1;
  layer.style.display = 'block';
  layer.style.visibility = 'visible';

  layer.src = items[type][index[type]];
}

function randomAll() {
  ['hat', 'face', 'shirt', 'short'].forEach(type => {
    randomItem(type);
  });
}

function toggleBase() {
  index.base = (index.base + 1) % items.base.length;
  document.getElementById('base_01').style.display = index.base === 0 ? 'block' : 'none';
  document.getElementById('base_02').style.display = index.base === 1 ? 'block' : 'none';
}

localStorage.setItem('outfit', JSON.stringify(index));
</script>

</body>
</html>